#:kivy 2.0.0


<ScheduleScreen>:
    box: box
    
    MDToolbar:
        title: 'Schedule'
        id: toolbar
        # left_action_items: [["chevron-left", lambda x: app.change_screen(manager=app.root.ids.data_sm,screen_name='data_screen', direction='right')]]
        right_action_items: [["plus", lambda x: root.show_dialog(), 'Create new'], ["check", lambda x: root.save(), 'Save']]
        specific_text_color: [.13,.13,.13,1]
        halign: 'center'
        pos_hint: {'top':1.0}
        elevation: 10

    DragBox:
        id: box
        drag_classes: ['card']
        orientation: "vertical"
        size_hint: 1, None
        height: self.minimum_height
        y: root.height - toolbar.height - self.height
        spacing: 5
        padding: 5


<ScheduleCard>:
    size_hint_y: None
    height: 167
    drag_cls: 'card'
    next_button: next_button

    MDCardSwipeLayerBox:
        padding: "8dp"

        canvas:
            Color:
                rgb: [.95, .57, .26, 1]
            Rectangle:
                pos: self.pos
                size: self.size

        MDIconButton:
            icon: "trash-can"
            pos_hint: {"center_y": .5}
            on_release: root.remove()
            disabled: True if root.open_progress < 0.1 else False

    MDCardSwipeFrontBox:
        RelativeLayout:
            canvas:
                Color: 
                    rgba: [.95, .57, .26, 1] if root == app.scheduled else [0,0,0,0]
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height
                    
            NextButton:
                id: next_button
                card: root
            Label:
                # id: label
                text: root.text
                font_size: 60
                size_hint_x: .9
                pos_hint: {'center_x': .5, 'center_y': .5}
                halign: 'center'
                valign: 'center'
                font_style: 'H3'

<NextButton>:
    text: 'next'
    theme_text_color: 'Custom' if self.state == 'down' else 'Hint'
    text_color: [.95, .57, .26, 1]
    pos_hint: {'top': 1, 'right': 1}
    min_state_time: .1
    adaptive_width: True
    adaptive_height: True
    group: 'schedule'
    # size: self.texture_size

<MySpacer>:
    canvas:
        Color:
            rgba: [.95, .57, .26, 1]
        Rectangle:
            size: self.size
            pos: self.pos


        # ThreeLineRightIconListItem:
        #     id: content
        #     text: root.option_info.title
        #     secondary_text: root.option_info.last_completed
        #     tertiary_text: root.option_info.lift_info
        #     _no_ripple_effect: True

        #     IconRightWidget:
        #         icon: 'chevron-right'
        #         on_release: root.launch_session_screen(app)
